<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revisando Resposta...</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        /* --- ESTILOS ATUALIZADOS PARA A TELA DE REVISÃO --- */

        /* Destaque para a resposta CORRETA */
        .option-button.correcta {
            background-color: #ffffff !important; /* Destaque branco */
            color: #333 !important;
            transform: scale(1.05);
            border: 4px solid #3498db;
        }

        /* Destaque para a resposta ERRADA que o jogador selecionou */
        .option-button.errada-selecionada {
            background-color: #e74c3c !important; /* Vermelho */
            opacity: 0.8; /* Mantém uma leve opacidade */
        }

        /* Estilo para as outras respostas (nem certa, nem selecionada) */
        .option-button.outra {
            opacity: 0.6; /* Apenas diminui a opacidade, sem o filtro cinza */
        }

        /* --- A NOVA LÓGICA DE VISIBILIDADE DO TEXTO --- */

        /* Por padrão, o texto de todos os botões fica invisível */
        .option-button .text {
            visibility: hidden;
        }

        /* MAS, o texto do botão com a classe 'correcta' se torna visível */
        .option-button.correcta .text {
            visibility: visible;
        }
    </style>
</head>
<body>
    <header class="question-header">
        <h1>{{ revisao.pergunta }}</h1>
    </header>

    <main class="media-container"></main>

    <footer class="options-footer">
        <div class="options-grid">
            {% set defaults = [
                {'cor': '#e74c3c', 'icone': 'A'},
                {'cor': '#3498db', 'icone': 'B'},
                {'cor': '#f1c40f', 'icone': 'C'},
                {'cor': '#2ecc71', 'icone': 'D'}
            ] %}
            
            {% for opcao_texto in revisao.opcoes_mostradas %}
                {% set default = defaults[loop.index0] %}
                
                {% set is_correct = (opcao_texto == revisao.resposta_correta) %}
                {% set is_player_choice = (opcao_texto == revisao.resposta_jogador) %}
                
                {% set extra_class = '' %}
                {% if is_correct %}
                    {% set extra_class = 'correcta' %}
                {% elif is_player_choice %}
                    {% set extra_class = 'errada-selecionada' %}
                {% else %}
                    {% set extra_class = 'outra' %}
                {% endif %}

                <button class="option-button {{ extra_class }}" style="background-color: {{ default.cor }};" disabled>
                    <span class="icon">{{ default.icone }}</span>
                    <span class="text">{{ opcao_texto }}</span>
                </button>
            {% endfor %}
        </div>
    </footer>

    <script>
        // O script para avançar após 5 segundos continua o mesmo
        setTimeout(function() {
            {% if proximo_id < session.get('ordem_perguntas')|length %}
                window.location.href = "{{ url_for('exibir_pergunta', id_pergunta=proximo_id) }}";
            {% else %}
                window.location.href = "{{ url_for('animacao') }}";
            {% endif %}
        }, 5000);
    </script>
</body>
</html>